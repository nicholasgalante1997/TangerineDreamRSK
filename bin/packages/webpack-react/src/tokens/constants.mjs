import { formatImportMetaUrl } from './formatImportMetaUrl.mjs'
import { toTitleCase } from './strings.mjs'

const CLEAN = true
const AUTOGENERATED_FILE_DISCLAIMER = `/* THIS IS AN AUTOGENERATED FILE. PLEASE DO NOT EDIT DIRECTLY. @see "@/tokens/codegenTokens.mjs" */`
const NEWLINE = '\n'
const TABCHAR = '\t'
const tokenGroups = ['color', 'font', 'dimensions']
const tokenFields = ['value', 'description', 'type']
const tokenOutputTypes = ['css', 'ts-enums']

const CSS_OUTFILE = `${formatImportMetaUrl()}/styles/_variables.css`
const TS_OUTFILE = `${formatImportMetaUrl()}/types/styled.ts`

const transformMap = {
  css: (obj, path) => `--${path.map((chunk) => chunk.toLowerCase()).join('-')}: ${obj?.value};`,
  'ts-enums': (obj, path) =>
    `${path
      .slice(1)
      .map((chunk) => {
        if (chunk.includes('-')) {
          return chunk
            .split('-')
            .map((substring) => toTitleCase(substring))
            .join('')
        } else {
          return toTitleCase(chunk)
        }
      })
      .join('')} = '${obj?.value}',`
}

export {
  CLEAN,
  AUTOGENERATED_FILE_DISCLAIMER,
  NEWLINE,
  tokenFields,
  tokenGroups,
  tokenOutputTypes,
  transformMap,
  CSS_OUTFILE,
  TS_OUTFILE,
  TABCHAR
}
